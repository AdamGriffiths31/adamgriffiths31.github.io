<head>
    <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css"
/>
</head>
<body>
<div style="padding-top: 1em; font-family: charter, Georgia, Cambria, 'Times New Roman', Times, serif;">
    <div style="text-align: center">
    <h1>
    Weather App
    </h1>
    <div style="margin-left: auto;margin-right: auto;max-width: 42rem;">
        <h3>
            <a href="Index.html">Back</a>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
        </svg>
    <a target="_blank" href="https://github.com/AdamGriffiths31/WeatherApp">Source Code</a>

</h3>
</div>
<hr/>
<div style="margin-left: auto;margin-right: auto;max-width: 90rem;">
    <div style="display: flex;flex-wrap: wrap;display: block;">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
                    <h4>Technologies used</h4>
                <img class="Logo"src="Images/PythonLogo.png" alt="Python">
                <img class="Logo"src="Images/FlaskLogo.png" alt="Flask">
                <img class="LogoWide"src="Images/SQLiteLogo.png" alt="SQLite">
                <hr/>
                <h4>Weather App</h4>
                Flask is a Microweb framework to build REST APIs in Python.
                <br/>
                <br/>
                This app uses an API from <a href="https://openweathermap.org/api">Open Weather</a> to dispaly the weather for the current city. The user can add more cities via the input field or remove a city by clicking the trash icon. To add a city the API must return data - if not it is assumed to be an invalid input.
                <br/>
                <br/>
                The app uses SQLite3 for the database layer, this stores the city names the user has inputted.
                </div>
                <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                    <a href="https://gyazo.com/073d3cdd47b12d9ee12e9ec0bde62d77"><img src="https://i.gyazo.com/073d3cdd47b12d9ee12e9ec0bde62d77.gif" alt="Image from Gyazo" width="300" style="border: 1px solid;" /></a>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-7 col-md-7 col-sm-12 col-xs-12">
                    API Call
                    <pre>
                        <code class="language-python">
def get_weather_data(city):
    url = f'http://api.openweathermap.org/data/2.5/weather?q={city}&units=metric&appid=KEY'
    r = requests.get(url).json()
    return r
                        </code>
                </pre>
                </div>
                <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                    POST Request to add city
                    <pre>
                        <code class="language-py">
@app.route('/', methods=['POST'])
def index_post():
    errorMessage=''
    new_city = request.form.get('city')
    if new_city:
        city_exists=City.query.filter_by(name=new_city).first()
        if not city_exists:
            new_city_data=get_weather_data(new_city)
            if new_city_data['cod']==200:
                new_city_obj = City(name=new_city)
                db.session.add(new_city_obj)
                db.session.commit()
            else:
                errorMessage='City not found'
        else:
            errorMessage='City already exists'
                        </code>
                </pre>
                </div>
            </div>
        </div>
    
    
    </div>
    </div>

</body>

<style>
    .Logo{
        height: 60px;
        width: 60px;
    }
    .LogoWide{
        height: 60px;
        width: 70px;
    }
</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-python.min.js"></script>